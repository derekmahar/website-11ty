{% from "photo.njk" import photo %}

<article class="h-entry entry">
  <header>
    <a href="/" class="u-author"></a>
    
    <span class="entry__published dt-published">{{ post.data.date | date  }}</span>
    
    {% if post.data.title  %}
    <h2 class="entry__title p-name"><a href="{{ post.url | strip_ext }}" class="entry__titlelink">{{ post.data.title }}</a></h2>
    {% endif %}
  </header>
  
  <section class="e-content">
  <p>
  {% if post.data.postType == "like"%}
  Liked a <a class="u-like-of" href="{{post.data.mp_properties['like-of']}}">post</a>
  {% elseif post.data.postType == "repost"%}
  Reposted a <a class="u-repost-of" href="{{post.data.mp_properties['repost-of']}}">post</a>
  {% elseif post.data.postType == "reply"%}
  Replied to a <a class="u-in-reply-to" href="{{post.data.mp_properties['in-reply-to']}}">post</a>
  {% elseif post.data.postType == "bookmark"%}
  Bookmarked a <a class="u-bookmark-of" href="{{post.data.mp_properties['bookmark-of']}}">link</a>
  {% endif %}
  </p>

  {% set bridgy = post.data.mp_properties['mp-syndicate-to'] | bridgy_mentions %}
  {% for mention in bridgy %}
  <a href="{{mention}}"></a>
  {% endfor %}

  {{ post.templateContent | excerpt | safe }}

  {% if post.data.mp_properties.photo %}
  {{ photo(post.data.mp_properties.photo) }}
  {% endif %}

  {% if post.data.postType != 'article' %}
  {% set link = (post.data.mp_properties | referenced_link) or (post.templateContent | content_link) %}
  {% if link %}
  {% set scraped = link | preview(link | slug) %}
  {% include "preview.njk" %}
  {% endif %}
  {% endif %}

  {% if post.data.postType == 'article' %}
  <a href="{{ post.url | strip_ext }}">Read more &raquo;</a>
  {% endif %}
  </section>
  {% set tags = post.data.tags %}
  {% set url = post.url | strip_ext %}
  {% include "entry-footer.njk" %}
  
