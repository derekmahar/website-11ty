{% extends "blogbase.njk" %}

{% from "photo.njk" import photo %}

{% block content %}
<main class="main">
<article class="h-entry entry">
  <header>
    <a href="/" class="u-author"></a>
    
    <span class="entry__published dt-published">{{ date | date  }}</span>

    {% if title  %}
    <h1 class="main__title p-name">{{ title }}</h1>
    {% endif %}
    
  </header>
  
  <section class="e-content">
  {% if postType == "like"%}
  Liked a <a class="u-like-of" href="{{mp_properties['like-of']}}">post</a>
  {% elseif postType == "repost"%}
  Reposted a <a class="u-repost-of" href="{{mp_properties['repost-of']}}">post</a>
  {% elseif postType == "reply"%}
  Replied to a <a class="u-in-reply-to" href="{{mp_properties['in-reply-to']}}">post</a>
  {% elseif postType == "bookmark"%}
  Bookmarked a <a class="u-bookmark-of" href="{{mp_properties['bookmark-of']}}">link</a>
  {% endif %}
  
  {% set bridgy = mp_properties['mp-syndicate-to'] | bridgy_mentions %}
  {% for mention in bridgy %}
  <a href="{{mention}}"></a>
  {% endfor %}

  {{ content | safe }}

  {% if mp_properties.photo %}
  {{ photo(mp_properties.photo) }}
  {% endif %}

  {% if postType != 'article' %}
  {% set link = (mp_properties | referenced_link) or (content | content_link) %}
  {% if link %}
  {% set scraped = link | preview(link | slug) %}
  {% include "preview.njk" %}
  {% endif %}
  {% endif %}
  </section>
  {% set url = page.url | strip_ext %} 
  {% set expand = true %}
  {% include "entry-footer.njk" %}
  
</article>
</main>
{% endblock %}
